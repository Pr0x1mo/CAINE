<Window x:Class="CAINE.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:gif="http://wpfanimatedgif.codeplex.com"
        Title="CAINE - AI Error Analysis Tool" 
        Height="900" 
        Width="1200" 
        MinHeight="700"
        MinWidth="800"
        WindowStartupLocation="CenterScreen"
        Background="#1e1e1e">

    <Window.Resources>
        <!-- Modern color scheme -->
        <SolidColorBrush x:Key="PrimaryBrush" Color="#0078d4"/>
        <SolidColorBrush x:Key="SecondaryBrush" Color="#106ebe"/>
        <SolidColorBrush x:Key="AccentBrush" Color="#005a9e"/>
        <SolidColorBrush x:Key="BackgroundBrush" Color="#1e1e1e"/>
        <SolidColorBrush x:Key="SurfaceBrush" Color="#2d2d30"/>
        <SolidColorBrush x:Key="TextBrush" Color="#ffffff"/>
        <SolidColorBrush x:Key="MutedTextBrush" Color="#cccccc"/>
        <SolidColorBrush x:Key="BorderBrush" Color="#3e3e42"/>

        <!-- Modern button style -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource SecondaryBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#404040"/>
                                <Setter Property="Foreground" Value="#808080"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Modern TextBox style -->
        <Style TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontFamily" Value="Consolas, Courier New"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ScrollViewer x:Name="PART_ContentHost" 
                                        Padding="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                                <Setter Property="BorderThickness" Value="2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Modern GroupBox style -->
        <Style TargetType="GroupBox">
            <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GroupBox">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" 
                                  Background="{StaticResource BorderBrush}"
                                  CornerRadius="6,6,0,0"
                                  Padding="12,8">
                                <ContentPresenter ContentSource="Header"/>
                            </Border>

                            <Border Grid.Row="1"
                                  Background="{TemplateBinding Background}"
                                  BorderBrush="{TemplateBinding BorderBrush}"
                                  BorderThickness="{TemplateBinding BorderThickness}"
                                  CornerRadius="0,0,6,6"
                                  Padding="{TemplateBinding Padding}">
                                <ContentPresenter/>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" 
                  HorizontalScrollBarVisibility="Disabled">
        <Grid Margin="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- Header with logo -->
                <RowDefinition Height="Auto"/>
                <!-- Input section -->
                <RowDefinition Height="Auto"/>
                <!-- Buttons -->
                <RowDefinition Height="Auto" MinHeight="300"/>
                <!-- Results -->
                <RowDefinition Height="Auto" MinHeight="200"/>
                <!-- Teach section -->
            </Grid.RowDefinitions>

            <!-- Header Section with Large Background GIF -->
            <Grid Grid.Row="0" 
                  Height="360"
                  Margin="0,0,0,32">

                <!-- Large animated GIF background -->
                <Image HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      Stretch="Uniform"
                      gif:ImageBehavior.AnimatedSource="C:\Users\Proximus\source\repos\CAINE\CAINE\caine.gif"
                      gif:ImageBehavior.AutoStart="True"
                      gif:ImageBehavior.RepeatBehavior="Forever"/>

                <!-- Text overlays on top of the GIF -->
                <StackPanel VerticalAlignment="Bottom"
                           HorizontalAlignment="Center">


                    <TextBlock Text="AI-Powered Error Analysis &amp; Solution Engine"
                              FontSize="18"
                              FontWeight="SemiBold"
                              Foreground="{StaticResource TextBrush}"
                              HorizontalAlignment="Center"
                              TextAlignment="Center">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="Black" 
                                            Direction="270" 
                                            ShadowDepth="1" 
                                            BlurRadius="3"/>
                        </TextBlock.Effect>
                    </TextBlock>
                </StackPanel>
            </Grid>

            <!-- Input Section -->
            <StackPanel Grid.Row="1" Margin="0,0,0,24">
                <TextBlock Text="Paste your error or code issue below:"
                          FontSize="16"
                          FontWeight="SemiBold"
                          Foreground="{StaticResource TextBrush}"
                          Margin="0,0,0,12"/>

                <TextBox x:Name="ErrorInput"
                        MinHeight="120"
                        MaxHeight="200"
                        TextWrapping="Wrap"
                        AcceptsReturn="True"
                        VerticalScrollBarVisibility="Auto"
                        HorizontalScrollBarVisibility="Auto"/>
            </StackPanel>

            <!-- Action Buttons -->
            <StackPanel Grid.Row="2"
           Orientation="Horizontal"
           HorizontalAlignment="Center"
           Margin="0,0,0,24">

                <Button x:Name="BtnSearch" 
           Content="🔍 Analyze Error"
           Width="140"
           Margin="0,0,12,0"
           Click="BtnSearch_Click"/>

                <Button x:Name="BtnTeach"  
           Content="📚 Teach CAINE"
           Width="140"
           Margin="0,0,12,0"
           Click="BtnTeach_Click"/>

                <Button x:Name="BtnCaineApi"
           Content="🚀 Use CAINE API"
           Width="160"
           Margin="0,0,12,0"
           IsEnabled="False"
           Click="BtnCaineApi_Click"/>

                <Button x:Name="BtnAnalytics"
           Content="📊 View Analytics"
           Width="140"
           Click="BtnAnalytics_Click"/>
            </StackPanel>

            <!-- Results Section -->
            <GroupBox Grid.Row="3" 
                     Header="🎯 Analysis Results"
                     Margin="0,0,0,16">
                <StackPanel>
                    <TextBox x:Name="ResultBox"
                            TextWrapping="Wrap"
                            AcceptsReturn="True"
                            VerticalScrollBarVisibility="Auto"
                            HorizontalScrollBarVisibility="Auto"
                            IsReadOnly="True"
                            MinHeight="240"/>

                    <!-- Feedback Buttons -->
                    <StackPanel Orientation="Horizontal"
                               HorizontalAlignment="Center"
                               Margin="0,12,0,0">
                        <TextBlock Text="Was this solution helpful?"
                                  FontSize="13"
                                  Foreground="{StaticResource MutedTextBrush}"
                                  VerticalAlignment="Center"
                                  Margin="0,0,16,0"/>

                        <Button x:Name="BtnFeedbackYes"
                               Content="👍 Helpful"
                               Width="100"
                               Height="34"
                               Margin="0,0,8,0"
                               IsEnabled="False"
                               Click="BtnFeedbackYes_Click"/>

                        <Button x:Name="BtnFeedbackNo"
                               Content="👎 Not Helpful"
                               Width="130"
                               Height="34"
                               IsEnabled="False"
                               Click="BtnFeedbackNo_Click"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>

            <!-- Teaching Section -->
            <GroupBox Grid.Row="4" 
                     Header="🧠 Teach CAINE New Solutions">
                <StackPanel Margin="0,8,0,0">
                    <TextBlock Text="If CAINE couldn't solve your issue, help improve it by adding your solution:"
                              FontSize="13"
                              Foreground="{StaticResource MutedTextBrush}"
                              TextWrapping="Wrap"
                              Margin="0,0,0,12"/>

                    <TextBox x:Name="TeachSteps"
                            MinHeight="150"
                            TextWrapping="Wrap"
                            AcceptsReturn="True"
                            VerticalScrollBarVisibility="Auto"/>
                </StackPanel>
            </GroupBox>
        </Grid>
    </ScrollViewer>
</Window>